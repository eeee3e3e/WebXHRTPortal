<script type="text/javascript" src="~/js/jquery.js"></script>
<script type="text/javascript" src="~/Shared/javascript/XmlOp.js"></script>
<script>

    //productName-directline
    //xmlFilePath- d：/
    //RootNode- root
    // strField- ID (input)
    //likRequiredField (output)
    function productDisplay(productName, xmlFilePath, RootNode, linkRequiredField)//
    {
        //acquire product name from xml file according to strField.
        var ProductObj = getPath(productName, xmlFilePath, RootNode)[2];
        //get request field value. such as a path..
        var strFieldInfo = LinkDirect(productName, linkRequiredField, xmlFilePath);

    }

    //acquire node value according to field name;
    //field name: eg-ImgUrl..
    function getNodeValue(nodeObj, fieldname) {
        var returnValue = Array();
        while (nodeObj != null || typeof (nodeObj) != "undefined") {
            if (nodeObj.nodeName == fieldname) {
                returnValue["nodeObj"] = nodeObj;
                returnValue["nodeText"] = nodeObj.nodeTypedValue;
                break;
            }
            else {
                nodeObj = nodeObj.nextSibling;
            }
        }
        return returnValue;

    }
    //input the html content into a div element or other containers
    function MakeHtml(productName, xmlFilePath, RootNode, strFieldName) {
        var strHtml = "";
        var strImgPath = "";
        strHtml += "<ul id=\"orbs\" class=\"bubblewrap clearfix\">";
        var productObject = getPath(productName, xmlFilePath, RootNode);
        var ProductObj = productObject[2];
        DrawPath(productObject[0], "div_CurrentLocation");
        //the childNode is stored in the subItem label, tracking the SubItem array to retrive its child nodes.

        var SubProductObj = new Object();
        //alert(ProductObj.getElementsByTagName("SubItems"));
        if (NodeHasChild(ProductObj)) {
            strFieldName = "SubItems"
            SubProductObj = getNodeValue(ProductObj.childNodes[0], strFieldName)["nodeObj"];
        }
        else {
            SubProductObj = ProductObj;
        }
        for (var iCount = 0; iCount < SubProductObj.childNodes.length; iCount++) {
            if (SubProductObj.childNodes[iCount].childNodes[0].nodeType != 3) {
                nodeObj = SubProductObj.childNodes[iCount].childNodes[0];
                strHtml = DrawHtml(nodeObj, strHtml);
            }
            else  //if (SubProductObj.childNodes[iCount].nodeType == 3)  the node is leaf node
            {
                nodeObj = SubProductObj.childNodes[0];
                $.ajax({
                    url: getNodeValue(nodeObj, "WebUrl")["nodeText"],
                    dataType: 'html',
                    success: function (data) {

                        document.getElementById("div_Product").innerHTML = data;
                    }
                });

            }
        }

        document.getElementById("div_Product").innerHTML = strHtml;


    }

    //true: has child  false: no child
    function NodeHasChild(NodeObj) {
        var rv = false;
        for (var i = 0; i < NodeObj.childNodes.length; i++) {
            if (NodeObj.childNodes[i].nodeName == "SubItems") {
                rv = true;
                break;
            }
        }
        return rv;
    }

    function DrawPath(strPath, strDiv) {
        var strRV = "你现在的位置是："; // return value.

        var strFullPath = "首页-" + strPath.replace(/-SubItems/g, "");
        strArray = strFullPath.split("-");
        for (var i = 0; i < strArray.length; i++) {
            strRV += "<a class=\"gold\" href=\"#\">" + strArray[i] + "</a>";
            if (i != strArray.length - 1)
                strRV += ">";
        }
        document.getElementById(strDiv).innerHTML = strRV; //div_CurrentLocation
    }

    function DrawHtml(nodeObj, strHtml) {
        //1.Formating
        //strImgPath = nodeObj.ImageUrl; //image url
        strHtml += "<li>";
        strHtml += "<a href='#'>";
        strHtml += "<img style='z-index: 999; left: 0px; top: 0px; display: block;'";
        strHtml += "src='/" + getNodeValue(nodeObj, "ImageUrl")["nodeText"] + "' alt=\"\" onclick=\"MakeHtml(\'" + getNodeValue(nodeObj, "Name")["nodeText"] + "\', \'/Shared/xml/xmlPath.xml\', \'首页\',\'" + getNodeValue(nodeObj, "Name")["nodeText"] + "\')\">";
        //strHtml += "src='/" + getNodeValue(nodeObj, "ImageUrl")["nodeText"] + "' alt=\"\" onclick=\"MakeHtml(\'" + getNodeValue(nodeObj, "Name")["nodeText"] + "\', \'/Shared/xml/xmlPath.xml\', \'首页\',\'SubItems\')\">";

        strHtml += "</a>"
        strHtml += "<div class=\"tooltip\" style=\"z-index: 999; text-align:center;  left: -24.5px; top: -56.5px; padding-top:60px;\">";
        strHtml += "<a href=\"#\" ";
        // strHtml += getNodeValue(nodeObj, "WebUrl")["nodeText"];  //web html url
        strHtml += "\">" + getNodeValue(nodeObj, "Name")["nodeText"] + "</div>";
        /*<div class="tooltip" style="z-index: 999; text-align:center;  left: -24.5px; top: -56.5px; padding-top:60px;">
            <a href="productzx.html">专线业务</a>
        </div>*/
        return strHtml;
    }

</script>
<div class="clearfix rightTitle">
    <h2 class="left">产品介绍 PRODUCTS</h2>
    <div  id="div_CurrentLocation" class="right location">你现在的位置是： <a class="gold" href="index.html">首页</a> > <a class="gold" href="product.html">产品介绍</a> > <span class="lightGrey">数据业务</span></div>
</div>
<div id="div_Product">
    <ul id="orbs" class="bubblewrap clearfix">

        <li>
            <a href="#">
                <img style="z-index: 999; left: 0px; top: 0px; display: block;" src="~/Content/images/product/Internet/network.png"
                      alt="" onclick="MakeHtml('专线业务', '/Shared/xml/xmlPath.xml', '首页', 'SubItems')">
            </a>
            <div class="tooltip" style="z-index: 999; text-align:center;  left: -24.5px; top: -56.5px; padding-top:60px;">
                <a href="#">专线业务</a>
            </div>
        </li>



        <li>
            <a href="#">
                <img style="z-index: 999; left: 0px; top: 0px; display: block;" src="~/Content/images/product/IDC/IDC.png" alt=""
                     onclick="MakeHtml('IDC业务', '/Shared/xml/xmlPath.xml', '首页', 'IDC业务')">
            </a>
            <div class="tooltip" style="z-index: 999; text-align:center;  left: -24.5px; top: -56.5px; padding-top:60px;">
                <a href="#">IDC业务</a>
            </div>
            
        </li>
    </ul>
</div>
